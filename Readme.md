# Включение робота
#### Запуск компьютера
Создать точку доступа:    
ssid: qwerty password: 12345678    
Проверить что компьютер робота включен в розетку.
Включить компьютер. Через некоторое время он подключится к созданной точке доступа.    
Узнать ip адрес компьютера в локальной сети и подключиться к нему по ssh:    
user: main password: QazWsx    
Вести следующие команды:   
vf activate drawing-robot-38    
set -x DISPLAY :0    
#### Запуск манипулятора
Подключить к розетке контроллер манипулятора.
Зажать кнопку включения на планшете манипулятора, она должна загореться зеленым.
После загрузки контроллера в окне initialize нажать на кнопку ON.
Подождать пока манипулятор загрузится и нажать кнопку START, стопоры в моторах освободятся с характерными щелчками.    
#### Запуск захвата
На планшете манипулятора нажать на кнопку UR+ в правом верхнем углу.
Выбрать раздел adaptive gripper и нажать на кнопку activate gripper.
Захват проведет калибровку, в процессе этого ничто не должно препятствовать его движению.
Далее станет доступен интерфейс управления захватом.
#### Запуск колесной платформы
Зажать синюю кнопку в углу платформы.
Когда кнопка спереди робота начнет мигать нажать на нее.
После того как подсветка платформы начнет светиться оранжевым, платформа готова к работе.    
____
# Запуск рисования
Подключить манипулятор и платформу к компьютеру с помощью кабелей Ethernet.
Для работы нейросети требуеься модель. Она должна находиться в директории modules/tracing в проекте под названием DexiNed23_model.h5.
Если модели в папке нет, нужно взять ее копию из директории /home/main и скопировать ее в проект.
Также нужно проверить что на манипуляторе включен remote control (кнопочка с экраном в правом верхнем углу), 
а также что камера глубины установлена на робота и подключена к питанию и к компьютеру (в случае правильного подключения должен гореть белый светодтод).
Перейти в папку с программой: 
cd drawing-robot-upload

Запустить программу командой:    
python main.py    

В браузере (устройство должно быть подключено к сети qwerty) вводим xxx.xxx.xx.xx:5000,
где вместо xxx.xxx.xx.xx — ip адрес компьютера робота в локальной сети.
Открывается Веб-интерфейс управления роботом-художником.
Перед началом рисования необходимо отметить левый верхний угол рисунка с помощью aruco маркера, закрепив его на поверхности.
Для остановки программы нужно нажать комбинацию клавиш ^C.
____
# Выключение робота
## Отключения манипулятора
Нажать на кнопку с тремя черточками в правом верхнем углу планшета манипулятора и выбрать пункт shutdown
В появившемся окне выбрать shutdown
#### Отключение платформы
Зажать синюю кнопку в углу платформы
#### Отключение компьютера
Завершить программу рисования.
Ввести комманду:    
sudo shutdown -P 0    
для sudo ввести пароль: QazWsx
____
# Структура проекта
- В файле main.py реализован Веб-интерфейс, а также вызов основных функций трейсинга и рисования.
- В директории control лежат файлы camera.py, manipulator.py и platform.py, в которых находятся классы-обертки для удобной работы с камерой, манипулятором и платформой соответственно.
- В директории drawing лежит файл drawing.py. В нем находится функция рисования, которая включает калибровку плоскости, преобразование координат и рисование контуров
- В директории modules лежит программа трейсинга изображений с помощью нейросети
- В директории ststic лежат файлы стилей и изображение предпросмотра трейсинга.
- В директории templates лежат html страницы Веб-интерфейса.
- В директории tracing лежит файл tracing.py, отвечающий за трейсинг изображений с помощью алгоритмов.
- В директории utils лежат управление захватом и модуль преобразования координат.
- Вне проекта в директории /home/main/RGBDPlaneDetection находится программа на c++, находящая плоскости с помощью камеры глуюины.
